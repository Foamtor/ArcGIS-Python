title: 空间分析之表面分析

categories:
  - 木工开物

date: 2012-08-20 09:31:00
tags: [Geoprocessing,Spatial Analyst]

---


我们可以利用“表面分析（Surface）”工具量化及可视化地形地貌。

![](http://my.csdn.net/uploads/201208/18/1345284010_1775.png)


**坡向（Aspect）：**获得栅格表面的坡向。求得每个像元到其相邻像元方向像元值的变化率最大的下坡方向。

**等值线（Contour）：**根据栅格表面创建等值线（等值线图）的线要素类。

**等值线序列（Contour List）：**根据栅格表面创建所选等值线值的要素类。

**含障碍的等值线（Contour with Barriers）：**根据栅格表面创建等值线。如果包含障碍要素，则允许在障碍两侧独立生成等值线。

**曲率（Curvature）：**计算栅格表面的曲率，包括剖面曲率和平面曲率。

**填挖方（Cut Fill）：**计算两表面间体积的变化。通常用于执行填挖操作。

**山体阴影（HillShade）：**通过考虑照明源的角度和阴影，根据表面栅格创建地貌晕渲。

**视点分析（Observer Point）：**识别从各栅格表面位置进行观察时可见的观察点。

**坡度（Slope）：**判断栅格表面的各像元中的坡度（梯度或 z 值的最大变化率）。

**视域（Viewshed）：**确定对一组观察点要素可见的栅格表面位置。


下面分类来看一下这些工具：

# **一、 各种等值线工具**


**1） 等值线（Contour）**

根据栅格表面数据创建等值线线要素类。可以指定起算线和间隔。

![](http://my.csdn.net/uploads/201208/19/1345384682_4882.png)

**2） 等值线列表（Contour list）**

根据栅格表面创建所指定等值线值的要素类。

**3）含障碍的等值线（Contour with Barriers）**

根据栅格表面创建等值线。如果包含障碍要素，则允许在障碍两侧独立生成等值线。

**TIPS： 关于等值线的质量问题**

少数情况下，所创建等值线的轮廓可能会呈方形或不均匀，看起来犹如沿着栅格像元的边界。出现这种情况可能是因为各栅格的值为整数且恰好落在等值线上。这并不是个问题，该等值线不过是原样呈现数据而已。

如果希望等值线更平滑，可行的方法包括对源数据进行平滑处理或调整起始等值线。


# **二、表面特征相关工具**

**1） 坡向（Aspect）**

![](http://my.csdn.net/uploads/201208/19/1345383924_6556.png)

此工具求得每个像元到其相邻的各个像元方向的 z 值上变化率最大的下坡方向。

从概念上讲，坡向工具将根据要处理的像元或中心像元周围一个 3 x 3 的像元邻域的 z 值拟合出一个平面。该平面的朝向就是待处理像元的坡向。

输出栅格的值将是坡向的罗盘方向。坡向由 0 到 359.9 度之间的正度数表示，以北为基准方向按顺时针进行测量。会为输入栅格中的平坦（具有零坡度）像元分配 -1 坡向。

![](http://my.csdn.net/uploads/201208/19/1345383796_7958.gif)

**2） 坡度（Slope）**

坡度是指各像元中 z 值的最大变化率。

从概念上讲，该工具会将一个平面与要处理的像元或中心像元周围一个 3 x 3 的像元邻域的 z 值进行拟合。该平面的坡度值通过最大平均值法来计算。

如果邻域内某个像元位置的 z 值为 NoData，则将中心像元的 z 值指定给该位置。如果直接邻域（3 x 3 窗口）中的中心像元为 NoData，则输出将为 NoData。

![](http://my.csdn.net/uploads/201208/18/1345284993_2641.gif)

确定输出坡度数据的测量单位（度或百分比）。

- DEGREE — 坡度倾角，单位：度，范围：0 ~ 90。
- PERCENT_RISE — 高程增量百分比，也称为百分比坡度，范围：0 ~ ∞。

该工具可与其他类型的连续数据（如人口）配合使用，用来识别值的急剧变化。

关于工具的详细算法：[http://help.arcgis.com/zh-cn/arcgisdesktop/10.0/help/index.html#/na/009z000000vz000000/](http://help.arcgis.com/zh-cn/arcgisdesktop/10.0/help/index.html#/na/009z000000vz000000/)

**3） 曲率（Curvature）**

主要输出结果为每个像元的表面曲率。曲率是表面的二阶导数，或者可称之为坡度的坡度。曲率为正说明该像元的表面向上凸。曲率为负说明该像元的表面开口朝上凹入。值为 0 说明表面是平的。

可供选择的输出曲率类型为：剖面曲率（沿最大斜率的坡度）和平面曲率（垂直于最大坡度的方向）。

从应用的角度看，该工具的输出可用于描述流域盆地的物理特征，从而便于理解侵蚀过程和径流形成过程。坡度会影响下坡时的总体移动速率。坡向将决定流向。剖面曲率将影响流动的加速和减速，进而将影响到侵蚀和沉积。平面曲率会影响流动的汇聚和分散。

![](http://my.csdn.net/uploads/201208/19/1345386200_8752.gif)

# **三、 填挖方（Cut Fill）**

计算两表面间体积的变化。通常用于执行填挖操作。

默认情况下，将使用专用渲染器来高亮显示执行填挖操作的位置。该渲染器将被挖的区域绘制成蓝色，将被填的区域绘制成红色。没有变化的区域将显示为灰色。

![](http://my.csdn.net/uploads/201208/19/1345386920_3777.gif)  ![](http://my.csdn.net/uploads/201208/19/1345386929_5425.gif)  ![](http://my.csdn.net/uploads/201208/19/1345386937_2737.gif)


# **四、山影（Hillshade）**

![](http://my.csdn.net/uploads/201208/18/1345281208_7182.gif)

此工具考虑的主要因素是太阳（照明源）在天空中的位置。看下此工具的参数设置：

![](http://my.csdn.net/uploads/201208/18/1345281353_5931.png)

**方位角（Azimuth）**指的是太阳的角度方向，是以北为基准方向在 0 到 360 度范围内按顺时针进行测量的。90º 的方位角为东。此工具默认方向角为 315º (NW)。

![](http://my.csdn.net/uploads/201208/18/1345281432_5410.gif)

**高度（Altitude）**指的是太阳高出地平线的角度或坡度。高度的单位为度，范围为 0（位于地平线上）到 90（位于头上）之间。此工具默认值为 45 度。

![](http://my.csdn.net/uploads/201208/18/1345281547_9666.gif)

**Model shadows**

通过对选择 Model shadows，可计算局部照明度以及像元是否落入阴影内。阴影值为0，所有其他像元的编码为介于 1 和 255 之间的整数。

**Z 因子（Z factor）**

z 单位与输入表面的 x,y 单位不同时，可使用 z 因子调整 z 单位的测量单位。计算最终输出表面时，将用 z 因子乘以输入表面的 z 值。

如果 x,y 单位和 z 单位采用相同的测量单位；则 z 因子为 1。这是默认值。此外，z 因子还可用于地形夸大。

例如，如果 z 单位是英尺而 x,y 单位是米，则应使用 z 因子 0.3048 将 z 单位从英尺转换为米（1 英尺 = 0.3048 米）

关于工具的详细算法：[http://help.arcgis.com/zh-cn/arcgisdesktop/10.0/help/index.html#/na/009z000000z2000000/](http://help.arcgis.com/zh-cn/arcgisdesktop/10.0/help/index.html#/na/009z000000z2000000/)


# **五、可见性分析**

**1） 视点分析**

![](http://my.csdn.net/uploads/201208/20/1345426433_3361.png)

视点工具生成的是在观测点处能够看到哪些位置的像元的二进制编码信息。观察点被限制为最多16 个。此工具仅支持点要素输入。

可见性信息存储在 VALUE 项中。如果要显示通过视点 3 能看到的所有栅格区域，就打开输出栅格属性表，然后选择视点 3 (OBS3) 等于 1 而其他所有视点等于 0 的记录。

例如，如下是7个观测点的可视性分析结果的属性表：

![](http://my.csdn.net/uploads/201208/20/1345426595_3655.png)

**2） 视域**

![](http://my.csdn.net/uploads/201208/20/1345426990_3800.png)

视域工具会创建一个栅格数据，以记录可从输入**视点**或 **视点折线要素**位置看到每个区域的次数。该值记录在输出栅格表的 VALUE 项中。

![](http://my.csdn.net/uploads/201208/20/1345427047_2439.png)

**TIPS：控制可见性分析**

通过在要素属性数据集中指定不同的项，可限制所检查的栅格区域。共有九项：SPOT、OFFSETA、OFFSETB、AZIMUTH1、AZIMUTH2、VERT1、VERT2、RADIUS1 和 RADIUS2。

附图帮助理解：

![](http://my.csdn.net/uploads/201208/20/1345425235_3546.gif)
![](http://my.csdn.net/uploads/201208/20/1345425302_9749.gif)
![](http://my.csdn.net/uploads/201208/20/1345425311_7820.gif)

这些值的默认值：

| **选项** | **默认值** | **参数意义** |
|---|---|---|
| SPOT | 使用双线性插值进行估计 | 观测点位置的高程 |
| OFFSETA | 1 | 观测点高（例如，仪器高），必须为正数 |
| OFFSETB | 0 | 各像元高(例如，目标高），必须为正数 |
| AZIMUTH1 | 0 | 观测起始方位角 |
| AZIMUTH2 | 360 | 观测终止方位角 |
| VERT1 | 90 | 观测起始竖直角 |
| VERT2 | -90 | 观测终止竖直角 |
| RADIUS1 | 0 | 起始可见半径 |
| RADIUS2 | 无穷大 | 终止可见半径 |

如果视点要素数据集是点要素类，则每个观测点都可具有属性表中的唯一一组观测约束。如果视点要素数据集是折线要素类，则沿输入折线的每个折点都会使用属性表的折线记录中包含的相同观测约束。如果某项不存在，将使用默认值。

![](http://my.csdn.net/uploads/201208/19/1345389426_6156.gif)


O了，关于表面分析的工具，总结到此结束。




