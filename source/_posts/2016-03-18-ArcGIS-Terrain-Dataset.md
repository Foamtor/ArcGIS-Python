title: ArcGIS Terrain Dataset
categories:
- 木工开物
date: 2012-12-13 16:23:24
tags: [Geodata,3D]
---

# **1 了解 Terrain Dataset**

Terrain Dataset 是多分辨率的基于 TIN 的表面数据结构，支持 ArcSDE、个人以及文件地理数据库，存储在ArcGIS&nbsp; Geodatabase 的 Feature Dataset 中，Feature Dataset 中需要包含构建 TIN 的要素类。

Terrain Dataset&nbsp;引用原始要素类，对数据重新组织重建索引，动态生成 TIN 表面，并没有实际创建栅格或 TIN 数据。

在数据组织过程中，会创建金字塔，用于决定数据细节层次。&nbsp;terrain 数据集是多分辨率 TIN。它具有一系列 TIN，其中每一个 TIN 都在特定的地图比例尺范围内使用。

![](http://img.my.csdn.net/uploads/201212/06/1354772763_1218.gif)

Terrain Dataset 可由不同类型的数据组成。支持的几何类型包括点、多点、线和多边形。每一种几何类型的数据都可以具有不同的表面要素类型（SFType），这与前面一篇博客中构建TIN时选择表面类型作用是相同的。

帮助中的下表很好的将常见数据类型的应用做了总结：



![](http://img.my.csdn.net/uploads/201212/06/1354775815_9215.png)

<br>

# **2 Terrain Dataset 的属性**


## **基本属性设置：**

**1） 平均点间距（Approximate Point Spacing）**

创建地形数据集时，需要指定输入测量值的平均点间距。平均点间距的作用是对点进行归类或分组，从而构造出虚拟分块系统。

平均点距的获得：查看元数据、向数据提供商或数据维护人员寻求帮助。实在无法获取，只能用量距工具估算了。

这个参数能够决定 Tile Size，查看Terrain数据集属性可以看到。

![](http://img.my.csdn.net/uploads/201212/06/1354779766_6788.png)



**2） 高度源（Height Source）**

向地形添加要素类时，需要指明该要素类是否具有 z 值；如果具有 z 值，则还需要指明这些值的来源。



**3） 表面要素类型（SFType）**

定义在对地形数据集表面进行定义时该要素类所发挥的作用。存在离散多点、断裂线以及若干种多边形类型。上面图表中有说明。



![](http://img.my.csdn.net/uploads/201212/06/1354781448_7892.png)



**4）地形金字塔（Terrain Pyramid）**

地形金字塔等级采用的依据是对精确度的要求随比例的减小而降低。金字塔等级在概念和用途上均类似于栅格金字塔，但二者的实现方法不同。 Terrain Pyramid 通过点抽稀实现。也就是下一级金字塔使用的点数少于上一级，但是采用的点都是原始的点值。 金字塔不使用任何重采样、平均化或派生的数据。

有两种金字塔类型：z 容差和窗口大小。
![](http://img.my.csdn.net/uploads/201212/06/1354783161_6853.png)

在窗口大小的选项中，可以设置二次抽稀。


## **高级属性设置**

![](http://img.my.csdn.net/uploads/201212/11/1355213787_8144.png)

**5）概貌地形（Overview Terrain）**

概貌地形是地形数据集最粗略表示，专门用于小比例尺下的快速绘制。如下图：

![](http://img.my.csdn.net/uploads/201212/11/1355213710_6040.png)

**6）定位点（Anchor Point）**

定位点在地形数据集的所有金字塔等级中保持不变。这些点不会被过滤，也不会被细化掉。这将确保无论使用何种分辨率金字塔等级，定位点都会存在于地形表面中。对于显示和分析操作都是这样。支持定位点的目的是使用户始终能在地形中保留一个相对较小的重要测量值集合，如控制点、水准点和最佳水深。

**7）组（Group）**

组用于为线要素和多边形要素定义多种详细程度。将相同的组 ID 指定给每个多边形要素类，向地形告知它们属于同一主题（例如，研究区域边界）。

**8）嵌入式要素类（Embedded feature classes）**

terrain 金字塔的大小约相当于参与 terrain 的要素类中所包含几何的大小，需要较大的存储空间。对于较大的点集合（通常由激光雷达或声纳表示），开销可能相当大，可以将较大的多点要素类嵌入 terrain 数据集中，以节省存储空间。构建 terrain 后，它将成为点的容器，而不再引用源要素类。可以将这些要素类删除，以恢复其存储空间。

## **性能的提示**

1） 最好将所有硬断线都放置在一个要素类中。

2） 定义 terrain 时，使用的要素类越少越好。

3） 不同数据库的数据量的选择：

 *   个人地理数据库的容量最小，应限制为包含 2,000 万或更少点数的地形。
 *   文件地理数据库可用于包含数十亿个点的地形。
 *   ArcSDE 的容量最大，适合点集可能会增长到数十亿的地形。

4） 金字塔类型的选择：

有两种方式可供选择： Z Tolerance 和 Windows Size。区别和使用情况如下：

 *   Z Tolerance：对地表裸露激光雷达最有效。金字塔过滤器速度较慢，但在某些分析中，控制垂直精度很重要，要细化此类分析中使用的数据，Z 容差金字塔过滤器更适合一些。
 *   Windows Size：对所有数据、第一回波激光雷达点最有效。窗口大小过滤器速度较快，适合于较常规的用途，它以水平采样密度为基础。Windows Size 金字塔过滤器是基于窗口大小以及用户指定的窗口统计数据来确定的。指定的窗口统计数据可以是最小点高度、最大点高度、平均点高度，或者是同时指定最小和最大点高度。

5） 有关构建Terrain的建议和最佳方法：

http://resources.arcgis.com/zh-cn/help/main/10.1/index.html#/na/005v0000001r000000/

